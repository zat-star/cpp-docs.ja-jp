---
title: "TN024: MFC で定義されているメッセージおよびリソース |Microsoft ドキュメント"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology:
- cpp-windows
ms.tgt_pltfrm: 
ms.topic: article
f1_keywords:
- vc.mfc.messages
dev_langs:
- C++
helpviewer_keywords:
- resources [MFC]
- Windows messages [MFC], MFC-defined
- messages [MFC], MFC
- TN024
ms.assetid: c65353ce-8096-454b-ad22-1a7a1dd9a788
caps.latest.revision: 
author: mikeblome
ms.author: mblome
manager: ghogen
ms.workload:
- cplusplus
ms.openlocfilehash: 17aadfd089d6917cd8cded239287034026ff7ad3
ms.sourcegitcommit: 8fa8fdf0fbb4f57950f1e8f4f9b81b4d39ec7d7a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/21/2017
---
# <a name="tn024-mfc-defined-messages-and-resources"></a>テクニカル ノート 24: MFC で定義されているメッセージおよびリソース
> [!NOTE]
>  次のテクニカル ノートは、最初にオンライン ドキュメントの一部とされてから更新されていません。 結果として、一部のプロシージャおよびトピックが最新でないか、不正になります。 最新の情報について、オンライン ドキュメントのキーワードで関係のあるトピックを検索することをお勧めします。  
  
 ここでは、Windows の内部メッセージと MFC で使用されるリソース形式について説明します。 この情報は、framework の実装について説明しますは、アプリケーションのデバッグに役立ちます。 ここで解説すべての情報は公式にサポートされていない場合でも使用できますこの情報の一部の高度な実装。  
  
 このメモには、MFC プライベート実装の詳細が含まれています。すべての内容は、今後変更される可能性がいます。 MFC プライベート Windows メッセージは、1 つのアプリケーションのみのスコープ内の意味を持ちますは今後変更される、システム全体のメッセージを保存します。  
  
 範囲の MFC プライベート Windows メッセージおよびリソースの種類は予約済みの"system"の範囲内に確保 Microsoft Windows によってです。 範囲に現在すべての数値を使用して、今後、新しい、範囲の数を使用する可能性があります。 現在使用されている番号を変更することがあります。  
  
 MFC プライベート Windows メッセージ 0x360 の範囲内で 0x37F]-> [です。  
  
 MFC のプライベートなリソースの種類は 0xF0 の範囲には、0 xff]-> [です。  
  
 **MFC プライベート Windows メッセージ**  
  
 これらの Windows メッセージは、比較的疎結合が必要なウィンドウ オブジェクトの間でされずに、C++ の仮想関数は適切な C++ の仮想関数の代わりに使用されます。  
  
 これらのプライベート Windows メッセージと関連付けられているパラメーター構造体が MFC プライベート ヘッダーで宣言された ' AFXPRIV です。H' です。 このヘッダーを含むコードのいずれかの可能性がありますに依存ドキュメントに未記載の動作とが壊れる可能性が高い将来のバージョンの MFC を警告表示されます。  
  
 まれなケースをこれらのメッセージのいずれかの処理を必要とするのでは、使用することは、`ON_MESSAGE`メッセージ マップ マクロと汎用 LRESULT/WPARAM/LPARAM 形式のメッセージを処理します。  
  
 **WM_QUERYAFXWNDPROC**  
  
 このメッセージは、作成されるウィンドウに送信されます。 これは、送信、作成プロセスの初期段階で、WndProc がないか判断するメソッドとして**プロシージャ。 します。プロシージャ。** 1 を返します。  
  
|||  
|-|-|  
|wParam|未使用|  
|lParam|未使用|  
|の場合、|によって処理される場合は 1**プロシージャ。**|  
  
 **WM_SIZEPARENT**  
  
 このメッセージは送信したフレーム ウィンドウでその直接の子にサイズ変更時に (**送られます**呼び出し`CFrameWnd::RecalcLayout`呼び出し`CWnd::RepositionBars`) フレームの周囲のコントロール バーの位置を変更します。 **AFX_SIZEPARENTPARAMS**構造を呼び出す親と (を NULL にすることがあります) HDWP の現在の使用可能なクライアントの四角形に含まれる`DeferWindowPos`を再描画を最小限にします。  
  
|||  
|-|-|  
|wParam|未使用|  
|lParam|アドレス、 **AFX_SIZEPARENTPARAMS**構造体|  
|の場合、|(0) を使用できません。|  
  
 メッセージを無視して、ウィンドウはレイアウトの一部を受け取らないことを示します。  
  
 **WM_SETMESSAGESTRING**  
  
 このメッセージは、ステータス バーにメッセージ行を更新することを確認するフレーム ウィンドウに送信します。 文字列 ID または、LPCSTR のいずれかは、指定された (ただし、両方は必要ありません) を指定できます。  
  
|||  
|-|-|  
|wParam|文字列の ID (または 0)|  
|lParam|文字列 (または NULL) の LPCSTR|  
|の場合、|(0) を使用できません。|  
  
 **WM_IDLEUPDATECMDUI**  
  
 このメッセージは、更新コマンド UI ハンドラーのアイドル時間の更新プログラムを実装するアイドル時間で送信されます。 作成ウィンドウ (通常はコントロール バー) は、メッセージを処理する場合、`CCmdUI`オブジェクト (または派生クラスのオブジェクト) を呼び出すと**受け取る**ウィンドウ内の「アイテム」の各します。 これはさらに確認、`ON_UPDATE_COMMAND_UI`コマンド ハンドラー チェーン内のオブジェクトのハンドラー。  
  
|||  
|-|-|  
|wParam|BOOL bDisableIfNoHandler|  
|lParam|(0) を使用できません。|  
|の場合、|(0) を使用できません。|  
  
 *bDisableIfNoHandler*どちらを使用する必要がある場合は、UI オブジェクトを無効にする 0 以外の場合、`ON_UPDATE_COMMAND_UI`も、`ON_COMMAND`ハンドラー。  
  
 **WM_EXITHELPMODE**  
  
 このメッセージをポスト、`CFrameWnd`終了状況に依存するヘルプ モード。 このメッセージの受信によって開始されたモーダル ループを終了する**受信します。**  
  
|||  
|-|-|  
|wParam|(0) を使用できません。|  
|lParam|(0) を使用できません。|  
|の場合、|未使用|  
  
 **WM_INITIALUPDATE**  
  
 このメッセージは、安全性が最初の更新を実行できるようになる場合に、ドキュメント テンプレートによってフレーム ウィンドウのすべての子孫に送信されます。 呼び出しに対応して`CView::OnInitialUpdate`他で使用できますが、 `CWnd`-その他の 1 回限りの更新のためのクラスを派生します。  
  
|||  
|-|-|  
|wParam|(0) を使用できません。|  
|lParam|(0) を使用できません。|  
|の場合、|(0) を使用できません。|  
  
 **WM_RECALCPARENT**  
  
 このメッセージは、親ウィンドウにビューを送信 (経由で取得した`GetParent`) レイアウトの再計算を強制する (通常は、親が呼び出す`RecalcLayout`)。 ビューの合計サイズが大きくなるように、サイズの増加をフレームに必要な OLE サーバー アプリケーションで使用されます。  
  
 親ウィンドウは、このメッセージを処理する場合は TRUE を返し、クライアント領域の新しいサイズを lparam として渡された rect、必要があります。 これで使用`CScrollView`スクロールバー (追加された場合は、ウィンドウの外側に配置) を適切に処理するときに、サーバー オブジェクトが、インプレース アクティブ化します。  
  
|||  
|-|-|  
|wParam|(0) を使用できません。|  
|lParam|LPRECT rectClient は NULL にすることがあります。|  
|の場合、|TRUE の場合は、新しいクライアントの四角形を返します。 FALSE|  
  
 **WM_SIZECHILD**  
  
 によってこのメッセージは送信`COleResizeBar`、オーナー ウィンドウに (を介して`GetOwner`) ときに、ユーザーは、サイズ変更ハンドルにサイズ変更バーのサイズを変更します。 `COleIPFrameWnd`ユーザーが要求されるとおり、フレーム ウィンドウの位置を変更しようとしています。 このメッセージに応答します。  
  
 サイズ変更バーを含むフレーム ウィンドウと相対的にクライアント座標で指定された、新しい四角形が指して lParam です。  
  
|||  
|-|-|  
|wParam|(0) を使用できません。|  
|lParam|LPRECT rectNew|  
|の場合、|(0) を使用できません。|  
  
 **WM_DISABLEMODAL**  
  
 このメッセージは、非アクティブにするフレーム ウィンドウが所有するすべてのポップアップ ウィンドウに送信されます。 フレーム ウィンドウでは、結果を使用して、ポップアップ ウィンドウを無効にするかどうかを調べます。  
  
 フレームがモーダル状態になるときに、ポップアップ ウィンドウで、特別な処理を実行するか、特定のポップアップ ウィンドウを無効にすることを防止する、これを使用することができます。 ツールヒントでは、このメッセージを使用して、たとえばフレーム ウィンドウをモーダルの状態になったときに自分自身を破棄します。  
  
|||  
|-|-|  
|wParam|(0) を使用できません。|  
|lParam|(0) を使用できません。|  
|の場合、|0 以外の値を**いない**ウィンドウを無効にする、0 は、ウィンドウが無効にすることを示します|  
  
 **WM_FLOATSTATUS**  
  
 このメッセージは、フレームがアクティブまたは別のトップレベル フレーム ウィンドウを非アクティブ化されたときに、フレーム ウィンドウが所有するすべてのポップアップ ウィンドウに送信されます。 これはの実装によって使用**返さ**で`CMiniFrameWnd`、ポップアップ ウィンドウのアクティブ化の同期を保つ、トップ レベルのフレーム ウィンドウのライセンス認証を使用します。  
  
|||  
|-|-|  
|wParam|次の値のいずれかです。<br /><br /> **FS_SHOW**<br /><br /> **FS_HIDE**<br /><br /> **FS_ACTIVATE**<br /><br /> **FS_DEACTIVATE**<br /><br /> **FS_ENABLEFS_DISABLE**<br /><br /> **FS_SYNCACTIVE**|  
|lParam|(0) を使用できません。|  
  
 戻り値が 0 以外にする必要がある場合**FS_SYNCACTIVE**が設定され、ウィンドウと、親フレームがアクティブにします。 `CMiniFrameWnd`スタイルを設定すると、0 以外を返します**返さです。**  
  
 詳細については、の実装を参照してください。`CMiniFrameWnd`です。  
  
## <a name="wmactivatetoplevel"></a>WM_ACTIVATETOPLEVEL  
 それ"最上位レベルのグループに"ウィンドウがアクティブまたは非アクティブ化されたとき、このメッセージはトップレベル ウィンドウに送信します。 ウィンドウがトップレベル ウィンドウなし親 (所有者)、またはそのようなウィンドウによって所有されている場合、最上位グループの一部です。 このメッセージは使用中のような**使い方**いますが、1 つのウィンドウの階層 (OLE アプリケーションで一般的) 内の別のプロセスに属している windows の混合がの状況で動作します。  
  
## <a name="wmcommandhelp-wmhelphittest-wmexithelpmode"></a>よう、領域、WM_EXITHELPMODE  
 これらのメッセージは、状況依存のヘルプの実装で使用されます。 参照してください[テクニカル ノート 28:](../mfc/tn028-context-sensitive-help-support.md)詳細についてはします。  
  
## <a name="mfc-private-resource-formats"></a>MFC プライベート リソース形式  
 MFC が現時点では、2 つのプライベートなリソース形式を定義します。 **RT_TOOLBAR**と**リソース形**です。  
  
## <a name="rttoolbar-resource-format"></a>RT_TOOLBAR リソース形式  
 AppWizard によって提供される既定のツールバーがに基づいて、 **RT_TOOLBAR**カスタム リソースは、MFC 4.0 で導入されました。 ツール バー エディターを使用してこのリソースを編集することができます。  
  
## <a name="rtdlginit-resource-format"></a>リソース形リソース形式  
 MFC のプライベートなリソースの 1 つの形式を使用して、余分なダイアログの初期化情報を格納します。 これには、コンボ ボックスに格納されている最初の文字列が含まれます。 このリソースの形式は、手動で編集するものでありませんが、Visual C によって処理されます。  
  
 Visual C が、これ**リソース形**リソースがリソースの情報を使用する代わりに API があるために、MFC の関連する機能を使用する必要はありません。 Visual C を使用しやすくはるかを記述、保守、および長期的に、アプリケーションに変換します。  
  
 基本的な構造、**リソース形**リソースのとおりです。  
  
```  
+---------------+    \  
| Control ID    |   UINT             |  
+---------------+    |  
| Message #     |   UINT             |  
+---------------+    |  
|length of data |   DWORD            |  
+---------------+    |   Repeated  
|   Data        |   Variable Length  |   for each control  
|   ...         |   and Format       |   and message  
+---------------+    /  
|     0         |   BYTE  
+---------------+  
```  
  
 繰り返されるセクションには、メッセージを送信するコントロールの ID が含まれ、メッセージ # (標準 Windows メッセージ) の送信と可変長のデータをします。 フォームでは、Windows メッセージが送信されます。  
  
```  
SendDlgItemMessage(<Control ID>, <Message #>, 0, &<Data>);
```  
  
 これは、すべての Windows メッセージとデータの内容を許可する、非常に一般的な形式です。 Windows メッセージの限定されたサブセットのみをサポート、Visual C リソース エディターと MFC: CB_ADDSTRING (データはテキスト文字列) コンボ ボックスの一覧の初期選択します。  
  
## <a name="see-also"></a>参照  
 [番号順テクニカル ノート](../mfc/technical-notes-by-number.md)   
 [カテゴリ別テクニカル ノート](../mfc/technical-notes-by-category.md)

