---
title: "リンカ ツール エラー LNK1104 |Microsoft ドキュメント"
ms.custom: 
ms.date: 05/17/2017
ms.reviewer: 
ms.suite: 
ms.technology:
- cpp-tools
ms.tgt_pltfrm: 
ms.topic: error-reference
f1_keywords:
- LNK1104
dev_langs:
- C++
helpviewer_keywords:
- LNK1104
ms.assetid: 9ca6f929-0efc-4055-8354-3cf5b4e636dc
caps.latest.revision: 
author: corob-msft
ms.author: corob
manager: ghogen
ms.workload:
- cplusplus
ms.openlocfilehash: c91853fe3310d8e577ac884545f86d1f4e1d4521
ms.sourcegitcommit: 8fa8fdf0fbb4f57950f1e8f4f9b81b4d39ec7d7a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/21/2017
---
# <a name="linker-tools-error-lnk1104"></a>リンカ ツール エラー LNK1104

> ファイルを開くことができません '*filename*'

リンカーは、指定したファイルを開けませんでした。 この問題の最も一般的な原因は、こと、ファイルは使用中または別のプロセスによってロックされている、存在しません、リンカーが検索するディレクトリのいずれかで見つからないか、ファイルにアクセスするための十分なアクセス許可がないです。 場合によっては、ディスク領域が不足する実行可能性があります、ファイルが大きすぎる可能性があります。 またはファイルへのパスが長すぎる可能性があります。

## <a name="possible-causes-and-solutions"></a>考えられる原因と解決策

このエラーは、リンカーは、読み取りまたは書き込みのいずれかのファイルを開こうとしたときに発生することができます。 考えられる原因を絞り込む、最初は、ファイルの種類を確認して使用して次のセクションでは、特定し、特定の問題を修正します。

### <a name="cannot-open-your-app-or-its-pdb-file"></a>アプリまたはその .pdb ファイルを開くことができません。

ファイル名が、実行可能ファイルの場合は、プロジェクトをビルド、または、関連付けられた .pdb ファイルに、最も一般的な原因は、アプリケーションが既に実行されていることを再構築しようとするか、デバッガーで読み込まれるときにします。 この問題を修正するには、プログラムを停止し、再構築する前に、デバッガーからアドインをアンロードします。 アプリが別のプログラムで開いている場合、など、リソース エディターを閉じます。 極端な場合は、タスク マネージャーを使用して、プロセスの終了または停止し、Visual Studio を再起動する必要があります。

ウイルス対策プログラムの多くの場合、一時的にブロックへのアクセス新しく作成されたファイル、.exe と .dll 特に実行可能ファイルです。 この問題を修正するのには、ウイルス対策スキャナーから、プロジェクトのビルド ディレクトリを除外してみてください。

### <a name="cannot-open-a-microsoft-library-file"></a>Microsoft ライブラリ ファイルを開くことができません。

ファイルを開くことができませんが、kernel32.lib など、Microsoft によって提供される標準ライブラリ ファイルのいずれかである場合は、プロジェクトの構成エラーまたはインストール エラーがあります。 Windows SDK がインストールされていることを確認し、プロジェクトには、MFC などの他の Microsoft ライブラリが必要とする場合は、MFC コンポーネントも Visual Studio インストーラーがインストールされていることを確認してください。 いつでも省略可能なコンポーネントを追加するには、もう一度インストーラーを実行することができます。 詳細については、次を参照してください。 [Visual Studio の変更](/visualstudio/install/modify-visual-studio)です。 インストーラーで、個々 のコンポーネント タブを使用すると、特定のライブラリと Sdk を選択できます。

古いバージョンの Visual Studio を使用して作成されたプロジェクトをビルドする場合、プラットフォームのツールセットとそのバージョンのライブラリがインストールされていません。 Msvcr100.lib などのバージョン管理されたライブラリ名のエラー メッセージが発生した場合、これが原因である可能性がありますです。 この問題を解決するには、2 つのオプションがあります。: をインストールしたら、現在のプラットフォーム ツールセットを使用するプロジェクトをアップグレードすることができます、または古いツールセットをインストールしてそのままプロジェクトをビルドします。 詳細については、次を参照してください。 [Visual c の以前のバージョンからプロジェクトをアップグレード](../../porting/upgrading-projects-from-earlier-versions-of-visual-cpp.md)と[古いプロジェクトをビルドする Visual Studio のネイティブ マルチ ターゲットを使用](../../porting/use-native-multi-targeting.md)です。

新しいターゲット プラットフォームまたは構成をビルドするときにこのエラーが発生する場合に、そのプロジェクトの構成とプラットフォームのツールセットは、ライブラリがインストールされていない可能性があります。 いることを確認、**プラットフォーム ツールセット**と**Windows SDK バージョン**で指定された、[全般 プロパティ ページ](../../ide/general-property-page-project.md)プロジェクトがインストールされ、いることを確認、必須使用可能なライブラリ、**ライブラリ ディレクトリ**で指定されている、 [vc++ ディレクトリ プロパティ ページ](../../ide/vcpp-directories-property-page.md)構成の設定。 デバッグ用の個別の設定があるし、小売構成だけでなく 32 ビットおよび 64 ビットの構成、1 つのビルドの動作が、エラーが発生する別になるように、設定が正しいとの必要なツールとライブラリがインストールされていることを確認してごと構成を作成します。

別のコンピューターからコピーされたプロジェクトをビルドする Visual Studio IDE を使用している場合は、ライブラリのインストールの場所が異なる場合があります。 チェック、**ライブラリ ディレクトリ**プロパティを[vc++ ディレクトリ プロパティ ページ](../../ide/vcpp-directories-property-page.md)プロジェクトのし、必要に応じて更新します。 参照し、IDE で設定されて現在のライブラリ パスを編集のドロップダウン コントロールを選択、**ライブラリ ディレクトリ**プロパティを選択して**編集**です。 **値を評価**のセクションで、**ライブラリ ディレクトリ**ダイアログが現在のライブラリ ファイルの検索パスを一覧表示します。

このエラーは、Windows SDK へのパスが期限切れの場合にも発生します。 Visual Studio のバージョンよりも新しい Windows SDK のバージョンがインストールされている場合に、パスが指定されている確認、 [vc++ ディレクトリ プロパティ ページ](../../ide/vcpp-directories-property-page.md)新しい SDK に合わせて更新します。 開発者コマンド プロンプトを使用する場合は、SDK の新しいパスの環境変数を初期化するバッチ ファイルを更新することを確認します。 この問題を回避するには、Visual Studio インストーラーを使用して、更新された Sdk をインストールします。

### <a name="cannot-open-a-third-party-library-file"></a>サード パーティ製のライブラリ ファイルを開くことができません。

これには、この問題のいくつかの一般的な原因があります。

- ライブラリ ファイルへのパスが正しくない可能性があります。 またはが指定していないことをリンカーにします。

- ライブラリの 32 ビット バージョンがインストールされている可能性がありますが、64 ビット、またはその逆の用にビルドします。

- ライブラリがインストールされていないその他のライブラリの依存関係があります。

パスの問題を修正するには、LIB 環境変数が設定され、ビルドするすべての構成を使用するライブラリのすべてのディレクトリを含むことを確認します。 IDE では、LIB 変数は設定、**ライブラリ ディレクトリ**プロパティを[vc++ ディレクトリ プロパティ ページ](../../ide/vcpp-directories-property-page.md)です。 ビルドするすべての構成の必要なライブラリが含まれているすべてのディレクトリがここでは、一覧表示することを確認します。

標準ライブラリ ディレクトリをオーバーライドするライブラリ ディレクトリを指定する必要がある場合は、使用することができます、 [/LIBPATH](../../build/reference/libpath-additional-libpath.md)オプション、コマンドラインで、または IDE では、使用できます、**追加のライブラリ ディレクトリ**プロパティに、**構成プロパティ > リンカー > 全般**プロジェクトのプロパティ ページ。

ビルドする構成に必要なライブラリのすべてのバージョンをインストールしたことを確認してください。 使用を検討して、 [vcpkg](../../vcpkg.md)管理ユーティリティのインストールと多くの一般的なライブラリのセットアップを自動化するをパッケージ化します。 可能であればはすべて、ローカルの依存関係をライブラリが必要と、し、ビルドのプロジェクトと同じ構成を確認してください、サード パーティ製のライブラリの独自のコピーを作成することをお勧めします。

### <a name="cannot-open-a-file-built-by-your-project"></a>プロジェクトによってビルドされたファイルを開くことができません。

場合にこのエラーが発生したファイル*filename*ソリューションがビルドされますが、まだ存在しない、リンカーは、アクセスしようとしています。 これは、1 つのプロジェクトは、別のプロジェクトによって異なりますが、正しい順序で、プロジェクトがビルドされないときに発生することができます。 この問題を解決するには、要求される前に、見つからないファイルがビルドされたファイルを使用しているプロジェクトのプロジェクト参照を設定を確認します。 詳細については、次を参照してください。 [Visual c プロジェクトで参照の追加](../../ide/adding-references-in-visual-cpp-projects.md)と[プロジェクト内の参照を管理する](/visualstudio/ide/managing-references-in-a-project)です。

### <a name="cannot-open-file-cprogramobj"></a>ファイルを開くことができません ' c:\\Program.obj'

表示する場合は、このエラーや、ドライブのルートに予期しない .obj ファイルに関連するようなエラー、問題がほぼ確実を二重引用符にラップされていないライブラリ パスにします。

コマンド ライン ビルド用には、この問題を解決するには確認、 [/LIBPATH](../../build/reference/libpath-additional-libpath.md)パラメーター、LIB 環境変数で指定されたパスおよびコマンド ラインで指定されたパスのオプションを選択し、任意のパスを二重引用符を使用することを確認空白を含むです。

IDE でこの問題を解決するには確認、**ライブラリ ディレクトリ**プロパティを[構成プロパティ > vc++ ディレクトリ](../../ide/vcpp-directories-property-page.md)プロパティ ページで、**追加のライブラリ ディレクトリ**プロパティに、**構成プロパティ > リンカー > 全般**プロパティ ページで、および**追加の依存関係**プロパティに、**構成プロパティ > リンカー > 入力**プロジェクトのプロパティ ページ。 必要な場合を必要なライブラリを含むすべてのディレクトリ パスを二重引用符でラップすることを確認します。

### <a name="other-common-issues"></a>その他の一般的な問題

このエラーは、ライブラリのファイル名またはパスをコマンドラインまたはリンカーに指定されている場合に発生することができます、 [#pragma comment (lib、"library_name")](../../preprocessor/comment-c-cpp.md)ディレクティブが正しくないか、またはパスが無効なドライブ指定します。 スペルとファイル拡張子を確認し、指定した場所にファイルが存在することを確認します。

別のプログラムのファイルが開かれている可能性があり、リンカーはそのファイルに書き込めません。 ウイルス対策プログラムの多くの場合、一時的にブロック新しく作成されたファイルにアクセスします。 この問題を修正するのには、ウイルス対策スキャナーから、プロジェクトのビルド ディレクトリを除外してみてください。

並行ビルド オプションを使用している場合は、Visual Studio の別のスレッド上のファイルがロックされていること。 この問題を解決するには、同じコード オブジェクトまたは複数のプロジェクトにライブラリをビルドしないことと、プロジェクトでビルドされたバイナリを取得するビルドの依存関係またはプロジェクトの参照を使用することを確認します。

個々 のライブラリを指定すると、**追加の依存関係**プロパティを直接スペースを使用して、ライブラリの名前、いないコンマまたはセミコロンで区切ります。 使用する場合、**編集**メニュー項目を開くには、**追加の依存関係**ダイアログ ボックスで、名、コンマではない、セミコロン、またはスペースを区切るため改行文字を使用します。 内のライブラリ パスを指定する場合は、改行文字が使用しても、**ライブラリ ディレクトリ**と**追加のライブラリ ディレクトリ** ダイアログ ボックス。

このエラーが発生する可能性がありますとへのパス*filename* 260 文字以上に拡張されます。 名前を変更するか、必要なファイルへのパスを短縮するために必要な場合に、ディレクトリ構造を再配置。

このエラーは、ファイルが大きすぎるために発生することができます。 ライブラリ オブジェクトのファイルまたはギガバイト サイズでは、32 ビット リンカー問題が発生する可能性がありますよりも大きくします。 この問題の考えられる修正では、64 ビット ツールセットを使用します。 コマンドラインで行う方法の詳細については、次を参照してください。[する方法: コマンドラインで 64 ビット Visual c ツールセットを有効にする](../../build/how-to-enable-a-64-bit-visual-cpp-toolset-on-the-command-line.md)です。 これは、IDE で実行する方法については、次を参照してください。 [64 ビットのコンパイラとツールを使用して MSBuild](../../build/walkthrough-using-msbuild-to-create-a-visual-cpp-project.md#using-msbuild-to-build-your-project)とこのスタック オーバーフローの投稿: [amd64 のネイティブ ツール チェーンを使用して Visual Studio を作成する方法](http://stackoverflow.com/questions/19820718/how-to-make-visual-studio-use-the-native-amd64-toolchain/23793055)です。

このエラーへのアクセスが不足しているファイルのアクセス許可がある場合に発生する可能性が*filename*です。 これは、ライブラリ ファイルが保護されたシステム ディレクトリにアクセスする通常のユーザー アカウントと試行を使用するか、元の権限を持つ他のユーザーからコピーしたファイルを使用する場合に発生することができますを設定します。 この問題を解決するには、ファイルを書き込み可能なプロジェクト ディレクトリに移動します。 ファイルが書き込み可能なディレクトリではアクセスできないアクセス許可を持つ場合は、管理者コマンド プロンプトを使用でき、ファイルの所有権を取得する takeown.exe コマンドを実行できます。

エラーは、ディスク領域が不足していないときに発生します。 リンカーが一時ファイルを使用するケースはいくつかあります。 場合でも、十分なディスク領域がある場合は、非常に大規模なリンクが消費されますしたり、使用可能なディスク領域をフラグメント化できます。 使用を検討して、 [/OPT (最適化)](../../build/reference/opt-optimizations.md)オプション; 行って推移的な COMDAT 除去読み取り、すべてのオブジェクト ファイル複数回です。

場合、 *filename* LNK の名前は*nnn*、一時ファイルのリンカーによって生成されるファイル名は、TMP 環境変数で指定されたディレクトリが存在しない、または 1 つ以上のTMP 環境変数のディレクトリを指定することがあります。 TMP 環境変数の 1 つだけのディレクトリ パスを指定する必要があります。
